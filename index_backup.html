<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord Plan√©taire</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* CSS maintenant externalis√© dans styles.css */
    </style>
</head>
<body>
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: auto auto auto;
            gap: 20px;
            grid-template-areas: 
                "extinction extinction extinction"
                "global resources climate"
                "conflicts tech-risks health";
        }

        .section {
            background: rgba(15, 25, 45, 0.8);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: visible; /* Permet √† la pop-up de sortir */
        }

        /* Override pour la ligne de scan qui a besoin d'overflow hidden */
        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00ffff, transparent);
            animation: scanLine 3s infinite;
            overflow: hidden; /* Contient seulement la ligne de scan */
        }



        @keyframes scanLine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .section:hover {
            border-color: rgba(0, 255, 255, 0.6);
            box-shadow: 0 12px 40px rgba(0, 255, 255, 0.2);
        }

        .extinction-section {
            grid-area: extinction;
            text-align: center;
            padding: 30px;
        }

        .extinction-title {
            font-size: 2rem;
            font-weight: 900;
            color: #00ffff;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        .gauge-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            height: 120px;
        }

        .gauge-background {
            width: 100%;
            height: 60px;
            background: linear-gradient(to right, 
                #00ff00 0%, #00ff00 10%,
                #7fff00 10%, #7fff00 30%,
                #ffff00 30%, #ffff00 50%,
                #ff8c00 50%, #ff8c00 70%,
                #ff4500 70%, #ff4500 89%,
                #ff0000 89%, #ff0000 100%);
            border-radius: 30px;
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .gauge-ticks {
            position: absolute;
            top: -10px;
            width: 100%;
            height: 80px;
        }

        .tick {
            position: absolute;
            width: 2px;
            height: 15px;
            background: rgba(255, 255, 255, 0.7);
            top: 0;
        }

        .gauge-needle {
            position: absolute;
            top: -20px;
            left: 22%;
            width: 4px;
            height: 100px;
            background: linear-gradient(to bottom, #ffffff, #00ffff);
            border-radius: 2px;
            transform-origin: bottom center;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
            animation: needleGlow 2s ease-in-out infinite alternate;
            transition: left 2s ease-out;
        }

        @keyframes needleGlow {
            0% { box-shadow: 0 0 15px rgba(0, 255, 255, 0.8); }
            100% { box-shadow: 0 0 25px rgba(0, 255, 255, 1); }
        }

        .world-commentary {
            margin-top: 25px;
            padding: 20px;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
            border-radius: 12px;
            backdrop-filter: blur(5px);
        }

        .commentary-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #00ff00;
            margin: 0 0 15px 0;
            text-align: center;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
            font-family: 'Roboto', sans-serif;
        }

        .commentary-text {
            font-size: 0.95rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            text-align: justify;
        }

        .commentary-text p {
            margin: 0 0 12px 0;
        }

        .commentary-text p:last-child {
            margin-bottom: 0;
        }

        .world-commentary-hover {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .world-commentary-hover:hover {
            background: rgba(0, 255, 0, 0.2);
            border-color: rgba(0, 255, 0, 0.6);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 255, 0, 0.4);
        }

        .world-commentary-hover:hover .commentary-title {
            text-shadow: 0 0 15px rgba(0, 255, 0, 0.8);
        }

        .global-section {
            grid-area: global;
            overflow: visible; /* Permet √† la pop-up de sortir du container */
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #00ffff;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .global-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-item {
            background: rgba(0, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #00ffff;
            transition: all 0.3s ease;
            cursor: help;
        }

        .stat-item:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
        }

        .stat-item.updating {
            animation: data-update 1s ease-in-out;
        }

        @keyframes data-update {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; transform: scale(1.05); }
        }

        /* Population popup styling */
        .population-popup {
            position: fixed; /* Utilisation de fixed pour sortir compl√®tement du flow */
            top: auto;
            left: auto;
            background: rgba(15, 25, 45, 0.95);
            border: 2px solid rgba(0, 255, 255, 0.6);
            border-radius: 12px;
            padding: 15px;
            min-width: 280px;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 255, 255, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 9999; /* Z-index tr√®s √©lev√© pour √™tre au-dessus de tout */
            font-family: 'Roboto', sans-serif;
            pointer-events: none; /* √âvite les probl√®mes d'interaction */
        }

        .stat-item:hover .population-popup {
            pointer-events: auto; /* R√©active les interactions au hover */
        }

        .population-popup::before {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid rgba(0, 255, 255, 0.6);
            transition: all 0.3s ease;
        }

        .population-popup::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid rgba(15, 25, 45, 0.95);
            transition: all 0.3s ease;
        }

        /* Variante quand la pop-up est en bas (fl√®che vers le haut) */
        .population-popup.bottom::before {
            bottom: auto;
            top: -8px;
            border-top: none;
            border-bottom: 8px solid rgba(0, 255, 255, 0.6);
        }

        .population-popup.bottom::after {
            bottom: auto;
            top: -6px;
            border-top: none;
            border-bottom: 6px solid rgba(15, 25, 45, 0.95);
        }

        .stat-item:hover .population-popup {
            opacity: 1;
            visibility: visible;
        }

        .popup-title {
            color: #00ffff;
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 10px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .popup-data {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .popup-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 0;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }

        .popup-row:last-child {
            border-bottom: none;
        }

        .popup-label {
            color: #aaaaaa;
            font-size: 0.75rem;
        }

        .popup-value {
            color: #ffffff;
            font-weight: 700;
            font-size: 0.8rem;
        }

        .popup-link {
            margin-top: 10px;
            text-align: center;
        }

        .popup-link a {
            color: #00ffff;
            text-decoration: none;
            font-size: 0.7rem;
            padding: 5px 10px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 4px;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .popup-link a:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: rgba(0, 255, 255, 0.6);
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
            animation: pulse-dot 2s ease-in-out infinite;
        }

        .status-live {
            background: #00ff00;
        }

        .status-cached {
            background: #ffaa00;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Oil reserves map modal */
        .oil-map-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .oil-map-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .oil-map-container {
            background: rgba(15, 25, 45, 0.95);
            border: 2px solid rgba(255, 140, 0, 0.6);
            border-radius: 15px;
            padding: 20px;
            max-width: 90vw;
            max-height: 90vh;
            width: 1000px;
            height: 700px;
            position: relative;
            box-shadow: 0 20px 60px rgba(255, 140, 0, 0.3);
            animation: modal-appear 0.5s ease-out;
        }

        @keyframes modal-appear {
            from {
                transform: scale(0.8) translateY(50px);
                opacity: 0;
            }
            to {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .oil-map-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 140, 0, 0.3);
        }

        .oil-map-title {
            color: #ff8c00;
            font-size: 1.2rem;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .oil-map-close {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: #ff6464;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .oil-map-close:hover {
            background: rgba(255, 0, 0, 0.4);
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }

        .oil-map-iframe {
            width: 100%;
            height: 600px;
            border: 1px solid rgba(255, 140, 0, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }

        .oil-resource-hover {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .oil-resource-hover:hover {
            background: rgba(255, 140, 0, 0.2);
            border-color: rgba(255, 140, 0, 0.6);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(255, 140, 0, 0.3);
        }

        .oil-resource-hover:hover .resource-label {
            color: #ff8c00;
            font-weight: 700;
        }

        .gas-resource-hover {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .gas-resource-hover:hover {
            background: rgba(65, 105, 225, 0.2);
            border-color: rgba(65, 105, 225, 0.6);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(65, 105, 225, 0.3);
        }

        .gas-resource-hover:hover .resource-label {
            color: #4169e1;
            text-shadow: 0 0 8px rgba(65, 105, 225, 0.6);
        }

        /* Instructions pour l'utilisateur */
        .oil-map-instructions {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            text-align: center;
            font-family: 'Orbitron', monospace;
        }

        @media (max-width: 768px) {
            .oil-map-container {
                width: 95vw;
                height: 80vh;
                padding: 15px;
            }

            .oil-map-title {
                font-size: 1rem;
            }
        }

        /* Conflicts chart modal */
        .conflicts-chart-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .conflicts-chart-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .conflicts-chart-container {
            background: rgba(15, 25, 45, 0.95);
            border: 2px solid rgba(255, 0, 102, 0.6);
            border-radius: 15px;
            padding: 20px;
            max-width: 90vw;
            max-height: 90vh;
            width: 1000px;
            height: 700px;
            position: relative;
            box-shadow: 0 20px 60px rgba(255, 0, 102, 0.3);
            animation: modal-appear 0.5s ease-out;
        }

        .conflicts-chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 0, 102, 0.3);
        }

        .conflicts-chart-title {
            color: #ff0066;
            font-size: 1.2rem;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .conflicts-chart-close {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: #ff6464;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .conflicts-chart-close:hover {
            background: rgba(255, 0, 0, 0.4);
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }

        .conflicts-chart-iframe {
            width: 100%;
            height: 600px;
            border: 1px solid rgba(255, 0, 102, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }

        /* Gas map modal */
        .gas-map-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .gas-map-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .gas-map-container {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f1419 100%);
            border: 2px solid rgba(65, 105, 225, 0.5);
            border-radius: 15px;
            padding: 20px;
            max-width: 95%;
            max-height: 95%;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7);
            animation: modal-appear 0.5s ease-out;
        }

        .gas-map-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(65, 105, 225, 0.3);
        }

        .gas-map-title {
            color: #4169e1;
            font-size: 1.2rem;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .gas-map-close {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: #ff6464;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .gas-map-close:hover {
            background: rgba(255, 0, 0, 0.4);
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }

        .gas-map-iframe {
            width: 100%;
            height: 600px;
            border: 1px solid rgba(65, 105, 225, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }

        /* Climate data modal */
        .climate-data-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .climate-data-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .climate-data-container {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f1419 100%);
            border: 2px solid rgba(0, 255, 127, 0.5);
            border-radius: 15px;
            padding: 20px;
            max-width: 95%;
            max-height: 95%;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7);
            animation: modal-appear 0.5s ease-out;
        }

        .climate-data-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 255, 127, 0.3);
        }

        .climate-data-title {
            color: #00ff7f;
            font-size: 1.2rem;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .climate-data-close {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: #ff6464;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .climate-data-close:hover {
            background: rgba(255, 0, 0, 0.4);
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }

        .climate-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .climate-sections {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        .climate-counter-section {
            background: rgba(0, 255, 127, 0.1);
            border: 1px solid rgba(0, 255, 127, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .climate-section-title {
            color: #00ff7f;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            font-family: 'Orbitron', monospace;
        }

        .climate-counter-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 120px;
        }

        .climate-data-instructions {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Geopolitical analysis modal */
        .geopolitical-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .geopolitical-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .geopolitical-container {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f1419 100%);
            border: 2px solid rgba(0, 255, 0, 0.5);
            border-radius: 15px;
            padding: 25px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8);
            animation: modal-appear 0.5s ease-out;
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 255, 0, 0.5) rgba(0, 0, 0, 0.2);
        }

        .geopolitical-container::-webkit-scrollbar {
            width: 8px;
        }

        .geopolitical-container::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }

        .geopolitical-container::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 0, 0.5);
            border-radius: 4px;
        }

        .geopolitical-container::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 0, 0.7);
        }

        .geopolitical-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(0, 255, 0, 0.3);
        }

        .geopolitical-title {
            color: #00ff00;
            font-size: 1.3rem;
            font-weight: 700;
            font-family: 'Roboto', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }

        .geopolitical-close {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: #ff6464;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .geopolitical-close:hover {
            background: rgba(255, 0, 0, 0.4);
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }

        .geopolitical-sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .geopolitical-sections {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .geopolitical-container {
                padding: 20px;
                max-width: 95%;
            }
        }

        .continent-card {
            background: rgba(0, 255, 0, 0.08);
            border: 1px solid rgba(0, 255, 0, 0.25);
            border-radius: 12px;
            padding: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .continent-card:hover {
            background: rgba(0, 255, 0, 0.15);
            border-color: rgba(0, 255, 0, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 0, 0.3);
        }

        .continent-card.expanded {
            background: rgba(0, 255, 0, 0.12);
            border-color: rgba(0, 255, 0, 0.4);
            padding-bottom: 20px;
            min-height: auto;
            align-items: flex-start;
        }

        .continent-card.expanded .expand-indicator {
            transform: rotate(180deg);
        }

        .continent-title {
            color: #00ff7f;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
            font-family: 'Roboto', sans-serif;
            text-shadow: 0 0 5px rgba(0, 255, 127, 0.5);
            flex-grow: 1;
        }

        .expand-indicator {
            color: #00ff7f;
            font-size: 1.2rem;
            font-weight: bold;
            transition: transform 0.3s ease;
            margin-left: 10px;
            user-select: none;
        }

        .continent-text {
            font-size: 0.9rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            text-align: justify;
            margin-top: 15px;
            width: 100%;
            transition: opacity 0.3s ease, max-height 0.3s ease;
            overflow: hidden;
        }

        .continent-text p {
            margin: 0 0 12px 0;
        }

        .continent-text p:last-child {
            margin-bottom: 0;
        }

        .geopolitical-instructions {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .conflicts-section-hover {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .conflicts-section-hover:hover {
            background: rgba(255, 0, 102, 0.2);
            border-color: rgba(255, 0, 102, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 0, 102, 0.3);
        }

        .conflicts-section-hover:hover .section-title {
            color: #ff0066;
            text-shadow: 0 0 10px rgba(255, 0, 102, 0.5);
        }

        /* Instructions pour l'utilisateur */
        .conflicts-chart-instructions {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            text-align: center;
            font-family: 'Orbitron', monospace;
        }

        @media (max-width: 768px) {
            .conflicts-chart-container {
                width: 95vw;
                height: 80vh;
                padding: 15px;
            }

            .conflicts-chart-title {
                font-size: 1rem;
            }
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffffff;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #aaaaaa;
            text-transform: uppercase;
        }

        .resources-section {
            grid-area: resources;
        }

        .resource-bar {
            margin: 15px 0;
        }

        .resource-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .resource-progress {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .resource-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 2s ease;
        }

        .oil-fill { background: linear-gradient(90deg, #ff8c00, #ffaa00); width: 45%; }
        .gas-fill { background: linear-gradient(90deg, #4169e1, #6495ed); width: 62%; }
        .water-fill { background: linear-gradient(90deg, #00bfff, #87ceeb); width: 78%; }

        .climate-section {
            grid-area: climate;
        }

        .climate-indicator {
            text-align: center;
            margin: 20px 0;
        }

        .temp-display {
            font-size: 2.5rem;
            font-weight: 900;
            color: #ff4500;
            text-shadow: 0 0 15px rgba(255, 69, 0, 0.5);
        }

        .climate-section-hover {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .climate-section-hover:hover {
            background: rgba(0, 255, 127, 0.15);
            border-color: rgba(0, 255, 127, 0.6);
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 255, 127, 0.3);
        }

        .climate-section-hover:hover .section-title {
            color: #00ff7f;
            text-shadow: 0 0 8px rgba(0, 255, 127, 0.6);
        }

        .conflicts-section {
            grid-area: conflicts;
            display: flex;
            justify-content: center;
        }

        .tech-risks-section {
            grid-area: tech-risks;
            display: flex;
            justify-content: center;
        }

        .conflict-subsection {
            background: rgba(255, 0, 100, 0.1);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 0, 100, 0.3);
            width: 100%;
            max-width: 300px;
        }

        .tech-risks-section .conflict-subsection {
            background: rgba(255, 165, 0, 0.1);
            border: 1px solid rgba(255, 165, 0, 0.3);
        }

        .conflict-counter {
            font-size: 2rem;
            font-weight: 900;
            color: #ff0066;
            text-align: center;
            margin: 10px 0;
        }

        .health-section {
            grid-area: health;
        }

        @media (max-width: 768px) {
            .dashboard-container {
                grid-template-columns: 1fr;
                grid-template-areas: 
                    "extinction"
                    "global"
                    "resources"
                    "climate"
                    "conflicts"
                    "tech-risks"
                    "health";
            }

            .conflicts-section {
                grid-template-columns: 1fr;
            }

            .extinction-title {
                font-size: 1.5rem;
            }

            .commentary-title {
                font-size: 1.2rem;
            }

            .commentary-text {
                font-size: 0.9rem;
            }

            .world-commentary {
                padding: 15px;
                margin-top: 20px;
            }
        }
        /* Audio controls styling for IEH section */
        .audio-controls-ieh {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(15, 25, 45, 0.9);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 6px;
            padding: 6px;
            backdrop-filter: blur(10px);
            width: 35px;
            height: 35px;
            transition: all 0.3s ease;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            cursor: pointer;
        }

        .audio-controls-ieh.expanded {
            width: 120px;
            padding: 8px;
        }

        .audio-controls-ieh button {
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid rgba(0, 255, 255, 0.5);
            color: #00ffff;
            padding: 4px 6px;
            border-radius: 3px;
            cursor: pointer;
            font-family: 'Orbitron', monospace;
            font-size: 0.7rem;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 25px;
        }

        .audio-controls-ieh button:hover {
            background: rgba(0, 255, 255, 0.4);
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.3);
        }

        .audio-controls-ieh button:active {
            transform: scale(0.95);
        }

        .audio-controls-ieh .audio-icon {
            font-size: 1rem;
        }

        .audio-controls-ieh .audio-text {
            margin-left: 6px;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 0.6rem;
        }

        .audio-controls-ieh.expanded .audio-text {
            opacity: 1;
        }

        /* Credits styling */
        .credits {
            position: fixed;
            bottom: 10px;
            left: 10px;
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.6);
            background: rgba(0, 0, 0, 0.7);
            padding: 8px;
            border-radius: 4px;
            max-width: 400px;
            z-index: 1000;
        }

        .credits a {
            color: #00ffff;
            text-decoration: none;
        }

        .credits a:hover {
            text-decoration: underline;
        }

        /* News header styling */
        .news-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 35px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            z-index: 2001;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        /* News ticker styling */
        .news-ticker {
            position: fixed;
            top: 35px;
            left: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(90deg, #ff0000, #ff4500, #ff0000);
            color: white;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            overflow: hidden;
            z-index: 2000;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 20px rgba(255, 0, 0, 0.3);
        }

        .breaking-news {
            color: #ffffff;
            font-weight: 700;
        }

        .live-status {
            font-size: 0.8rem;
            font-weight: 400;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .news-ticker {
            position: relative;
        }

        #newsStatus {
            animation: pulse-status 2s ease-in-out infinite alternate;
        }

        @keyframes pulse-status {
            0% { opacity: 0.6; }
            100% { opacity: 1; }
        }

        .news-content {
            white-space: nowrap;
            animation: scroll-left 150s linear infinite;
            padding-left: 20px;
            display: flex;
            align-items: center;
            width: 100%;
            height: 100%;
            mask: linear-gradient(to right, transparent 0%, black 100px, black calc(100% - 100px), transparent 100%);
            -webkit-mask: linear-gradient(to right, transparent 0%, black 100px, black calc(100% - 100px), transparent 100%);
        }

        @keyframes scroll-left {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .news-item {
            margin-right: 80px;
            display: inline-block;
        }

        .news-item::before {
            content: '‚óè';
            color: #00ffff;
            margin-right: 10px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        @media (max-width: 768px) {
            body {
                padding-top: 65px;
            }

            .audio-controls-ieh {
                bottom: 15px;
                right: 15px;
                padding: 4px;
                width: 30px;
                height: 30px;
            }

            .audio-controls-ieh.expanded {
                width: 100px;
                padding: 6px;
            }

            .audio-controls-ieh button {
                height: 20px;
                min-width: 20px;
                font-size: 0.6rem;
            }

            .audio-controls-ieh .audio-icon {
                font-size: 0.8rem;
            }

            .credits {
                font-size: 0.6rem;
                max-width: 300px;
            }

            .news-header {
                height: 30px;
                font-size: 0.75rem;
                padding: 0 10px;
            }

            .news-ticker {
                top: 30px;
                height: 35px;
                font-size: 0.8rem;
            }

            .breaking-news {
                font-size: 0.7rem;
            }

            .live-status {
                font-size: 0.6rem;
            }

            .news-content {
                animation-duration: 115s; /* Proportionnellement plus lent */
            }
        }
    </style>
</head>
<body>
    <!-- Audio Background -->
    <audio id="backgroundAudio" loop preload="auto">
        <source src="sounds/212025__qubodup__sci-fi-laboratory-ambience.ogg" type="audio/ogg">
        <source src="sounds/212025__qubodup__sci-fi-laboratory-ambience.mp3" type="audio/mpeg">
    </audio>

    <!-- Credits -->
    <div class="credits">
        Audio: <a href="http://freesound.org/people/qubodup/sounds/212025">Sci-fi Laboratory Ambience</a> by <a href="http://freesound.org/people/qubodup">Iwan Gabovitch</a> under <a href="http://creativecommons.org/licenses/by/3.0/legalcode">CC-BY 3.0 License</a> with sounds by wolick, swiftoid, Diboz
    </div>

    <!-- News Header -->
    <div class="news-header">
        <span class="breaking-news">üö® INFOS EN DIRECT</span>
        <span class="live-status" id="liveStatus">
            <span class="status-indicator status-cached"></span>
            <span>FRANCE 24 LIVE</span>
        </span>
    </div>

    <!-- News Ticker -->
    <div class="news-ticker">
        <div class="news-content" id="newsContent">
            <span class="news-item">üîÑ Chargement des derni√®res nouvelles France24...</span>
        </div>
    </div>

    <!-- Oil Map Modal -->
    <div class="oil-map-modal" id="oilMapModal">
        <div class="oil-map-container">
            <div class="oil-map-header">
                <div class="oil-map-title">üõ¢Ô∏è R√©serves Mondiales de P√©trole</div>
                <button class="oil-map-close" onclick="closeOilMap()">√ó</button>
            </div>
            <iframe src="https://ourworldindata.org/grapher/oil-proved-reserves?tab=map" 
                    loading="lazy" 
                    style="width: 100%; height: 600px; border: 0px none;" 
                    allow="web-share; clipboard-write"
                    class="oil-map-iframe">
            </iframe>
            <div class="oil-map-instructions">
                Cliquez sur √ó pour fermer ‚Ä¢ Donn√©es: Our World in Data
            </div>
        </div>
    </div>

    <!-- Conflicts Chart Modal -->
    <div class="conflicts-chart-modal" id="conflictsChartModal">
        <div class="conflicts-chart-container">
            <div class="conflicts-chart-header">
                <div class="conflicts-chart-title">‚öîÔ∏è Conflits Arm√©s dans le Monde</div>
                <button class="conflicts-chart-close" onclick="closeConflictsChart()">√ó</button>
            </div>
            <iframe src="https://ourworldindata.org/grapher/number-of-armed-conflicts?tab=chart" 
                    loading="lazy" 
                    style="width: 100%; height: 600px; border: 0px none;" 
                    allow="web-share; clipboard-write"
                    class="conflicts-chart-iframe">
            </iframe>
            <div class="conflicts-chart-instructions">
                Cliquez sur √ó pour fermer ‚Ä¢ Donn√©es: Our World in Data
            </div>
        </div>
    </div>

    <!-- Gas Map Modal -->
    <div class="gas-map-modal" id="gasMapModal">
        <div class="gas-map-container">
            <div class="gas-map-header">
                <div class="gas-map-title">üî• R√©serves de Gaz Naturel</div>
                <button class="gas-map-close" onclick="closeGasMap()">√ó</button>
            </div>
            <iframe src="https://ourworldindata.org/grapher/natural-gas-proved-reserves?tab=map" 
                    loading="lazy" 
                    style="width: 100%; height: 600px; border: 0px none;" 
                    allow="web-share; clipboard-write"
                    class="gas-map-iframe">
            </iframe>
            <div class="gas-map-instructions">
                Cliquez sur √ó pour fermer ‚Ä¢ Donn√©es: Our World in Data
            </div>
        </div>
    </div>

    <!-- Climate Data Modal -->
    <div class="climate-data-modal" id="climateDataModal">
        <div class="climate-data-container">
            <div class="climate-data-header">
                <div class="climate-data-title">üå°Ô∏è Donn√©es Climatiques Mondiales</div>
                <button class="climate-data-close" onclick="closeClimateData()">√ó</button>
            </div>
            
            <div class="climate-sections">
                <div class="climate-counter-section">
                    <h3 class="climate-section-title">üå°Ô∏è Temp√©rature Globale Moyenne</h3>
                    <div class="climate-counter-container">
                        <iframe title='World average temperature (¬∞C)' 
                                src='https://www.theworldcounts.com/embeds/counters/21?background_color=white&color=black&font_family=%22Helvetica+Neue%22%2C+Arial%2C+sans-serif&font_size=14' 
                                style='border: none' 
                                height='100' 
                                width='300'>
                        </iframe>
                    </div>
                </div>
                
                <div class="climate-counter-section">
                    <h3 class="climate-section-title">üåä Mont√©e du Niveau des Oc√©ans</h3>
                    <div class="climate-counter-container">
                        <iframe title='Rise in sea levels (cm)' 
                                src='https://www.theworldcounts.com/embeds/counters/68?background_color=white&color=black&font_family=%22Helvetica+Neue%22%2C+Arial%2C+sans-serif&font_size=14' 
                                style='border: none' 
                                height='100' 
                                width='300'>
                        </iframe>
                    </div>
                </div>
            </div>
            
            <div class="climate-data-instructions">
                Cliquez sur √ó pour fermer ‚Ä¢ Donn√©es: The World Counts
            </div>
        </div>
    </div>

    <!-- Geopolitical Analysis Modal -->
    <div class="geopolitical-modal" id="geopoliticalModal">
        <div class="geopolitical-container">
            <div class="geopolitical-header">
                <div class="geopolitical-title">üåç Analyse G√©opolitique Mondiale - Octobre 2025</div>
                <button class="geopolitical-close" onclick="closeGeopoliticalAnalysis()">√ó</button>
            </div>
            
            <div class="geopolitical-sections">
                <div class="continent-card" onclick="toggleContinentSection('africa')" title="Cliquez pour d√©velopper">
                    <h3 class="continent-title">üåç Situation en Afrique</h3>
                    <div class="expand-indicator">‚ñº</div>
                    <div class="continent-text" id="africa-text" style="display: none;">
                        <p>En octobre 2025, l'Afrique fait face √† une situation g√©opolitique marqu√©e par une croissance √©conomique r√©siliente, projet√©e √† 3,9 % pour l'ann√©e, malgr√© des vents contraires mondiaux comme les tensions commerciales et les conflits arm√©s. Des crises persistantes, telles que la guerre civile au Soudan et les instabilit√©s post-√©lectorales au Mozambique et en Mauritanie, alimentent des frustrations sociales et des risques s√©curitaires, exacerb√©s par l'ing√©rence ext√©rieure des √âmirats arabes unis et de la Russie.</p>
                        <p>L'Union africaine renforce ses partenariats avec l'ONU pour la paix et la s√©curit√©, tandis que des √©lections √† venir au Cameroun, en C√¥te d'Ivoire et en Tanzanie pourraient √©roder davantage la d√©mocratie. Au milieu de ces d√©fis, l'Afrique de l'Est m√®ne la croissance √† 5,9 %, mais la pauvret√©, le changement climatique et la gouvernance faible menacent une stabilit√© durable, avec des appels croissants √† une int√©grit√© √©lectorale accrue pour soutenir le d√©veloppement.</p>
                    </div>
                </div>

                <div class="continent-card" onclick="toggleContinentSection('asia')" title="Cliquez pour d√©velopper">
                    <h3 class="continent-title">üèØ Situation en Asie</h3>
                    <div class="expand-indicator">‚ñº</div>
                    <div class="continent-text" id="asia-text" style="display: none;">
                        <p>L'Asie en octobre 2025 est au c≈ìur d'une rivalit√© g√©opolitique intense entre les √âtats-Unis et la Chine, amplifi√©e par le retour de Donald Trump √† la Maison Blanche, qui promet une escalade des guerres commerciales et des tensions sur les min√©raux critiques. Des points chauds comme la mer de Chine m√©ridionale, Ta√Øwan et la p√©ninsule cor√©enne risquent des confrontations non militaires accrues, tandis que la Cor√©e du Nord consolide son pacte de d√©fense mutuelle avec la Russie, d√©ployant des troupes en Ukraine.</p>
                        <p>Le Sud-Est asiatique navigue entre ces dynamiques, avec des initiatives comme l'adh√©sion potentielle de la Chine au CPTPP et des √©lections en Australie et √† Singapour testant la stabilit√© r√©gionale. Malgr√© une reprise fragile de la consommation, les politiques protectionnistes am√©ricaines et la concurrence en IA redessinent les cha√Ænes d'approvisionnement, positionnant l'Asie comme le moteur de croissance mondial mais vuln√©rable √† une fragmentation accrue.</p>
                    </div>
                </div>

                <div class="continent-card" onclick="toggleContinentSection('europe')" title="Cliquez pour d√©velopper">
                    <h3 class="continent-title">üè∞ Situation en Europe</h3>
                    <div class="expand-indicator">‚ñº</div>
                    <div class="continent-text" id="europe-text" style="display: none;">
                        <p>En octobre 2025, l'Europe est confront√©e √† une "r√©cession g√©opolitique" o√π le conflit en Ukraine persiste, for√ßant une diversification √©nerg√©tique et une augmentation des d√©penses de d√©fense face √† une Russie affaiblie mais agressive. Les tensions commerciales avec les √âtats-Unis sous Trump, incluant des menaces de tarifs douaniers, et avec la Chine sur les v√©hicules √©lectriques, accentuent les divisions internes au sein de l'UE, limit√©e par des contraintes budg√©taires comme la "brake" allemande sur la dette.</p>
                        <p>La Commission europ√©enne, sous Ursula von der Leyen, pousse pour une "Commission g√©opolitique" renfor√ßant la souverainet√© √©conomique et la statecraft d√©fensive, tandis que des √©lections au Canada et en Irlande ajoutent de l'incertitude. Malgr√© une croissance faible, l'Europe cherche √† √©quilibrer ses alliances atlantiques et √† contrer l'influence russe et chinoise, avec une focalisation sur la cybers√©curit√© et l'IA pour pr√©server sa comp√©titivit√© globale.</p>
                    </div>
                </div>

                <div class="continent-card" onclick="toggleContinentSection('northAmerica')" title="Cliquez pour d√©velopper">
                    <h3 class="continent-title">üóΩ Situation en Am√©rique du Nord</h3>
                    <div class="expand-indicator">‚ñº</div>
                    <div class="continent-text" id="northAmerica-text" style="display: none;">
                        <p>L'Am√©rique du Nord en octobre 2025 est domin√©e par l'agenda impr√©visible de la seconde administration Trump, qui priorise un isolationnisme transactionnel avec des pressions sur les alli√©s pour plus de d√©penses de d√©fense et des n√©gociations de cessez-le-feu en Ukraine, tout en imposant des tarifs massifs sur la Chine et potentiellement l'Europe. Les √âtats-Unis consolident leur leadership en IA et biotechnologies, mais font face √† des risques cybern√©tiques accrus et √† une concurrence g√©o√©conomique fragmentant les cha√Ænes d'approvisionnement.</p>
                        <p>Au Canada, des √©lections f√©d√©rales en octobre pourraient red√©finir les relations avec Washington, tandis que le Mexique g√®re les flux migratoires et commerciaux sous pression. Malgr√© une croissance mod√©r√©e, la r√©gion navigue des tensions internes sur l'√©nergie et le climat, positionnant l'Am√©rique du Nord comme pivot central d'une reconfiguration globale des alliances et du commerce.</p>
                    </div>
                </div>

                <div class="continent-card" onclick="toggleContinentSection('southAmerica')" title="Cliquez pour d√©velopper">
                    <h3 class="continent-title">üåé Situation en Am√©rique du Sud</h3>
                    <div class="expand-indicator">‚ñº</div>
                    <div class="continent-text" id="southAmerica-text" style="display: none;">
                        <p>En octobre 2025, l'Am√©rique du Sud conna√Æt une croissance mod√©r√©e d'environ 2,5 %, boost√©e par des opportunit√©s dans les min√©raux pour la transition √©nerg√©tique, mais menac√©e par les incendies amazoniens records et la raret√© hydrique due au changement climatique. Les tensions g√©opolitiques s'intensifient avec le retour de Trump, amplifiant les risques migratoires et commerciaux, tandis que les cartels de drogue, enrichis par une production de coca√Øne doubl√©e, √©tendent leur influence vers l'Asie et l'Afrique, alimentant l'instabilit√© au P√©rou et en Colombie.</p>
                        <p>Des √©lections au Chili pourraient favoriser les conservateurs, et des leaders comme Nayib Bukele au Salvador inspirent des politiques s√©curitaires muscl√©es. Le sommet climatique de l'ONU √† Bel√©m, au Br√©sil, offre une chance de coordination r√©gionale, mais des divisions entre gouvernements de gauche et de droite, coupl√©es √† la concurrence sino-am√©ricaine pour les ressources, soulignent la vuln√©rabilit√© d'une r√©gion aux catastrophes environnementales et aux flux illicites.</p>
                    </div>
                </div>

                <div class="continent-card" onclick="toggleContinentSection('oceania')" title="Cliquez pour d√©velopper">
                    <h3 class="continent-title">üèùÔ∏è Situation en Oc√©anie</h3>
                    <div class="expand-indicator">‚ñº</div>
                    <div class="continent-text" id="oceania-text" style="display: none;">
                        <p>L'Oc√©anie en octobre 2025 √©merge comme un th√©√¢tre prioritaire de la comp√©tition entre grandes puissances, avec les √âtats-Unis intensifiant leur engagement via la Strat√©gie Indo-Pacifique pour contrer l'influence chinoise grandissante dans les √Æles du Pacifique, o√π P√©kin est le troisi√®me donateur d'aide apr√®s l'Australie et la Nouvelle-Z√©lande. Des √©lections f√©d√©rales pr√©coces en Australie et le premier test √©lectoral du Premier ministre singapourien Lawrence Wong testent la r√©silience r√©gionale face aux tensions en mer de Chine m√©ridionale et aux pactes comme celui entre la Cor√©e du Nord et la Russie.</p>
                        <p>Le changement climatique, mena√ßant les √âtats insulaires par la mont√©e des eaux, amplifie les appels √† une coop√©ration multilat√©rale, tandis que la Malaisie pr√©side l'ASEAN et les √éles Salomon le Forum des √Æles du Pacifique. Malgr√© une croissance stable, la r√©gion g√®re des d√©fis en cybers√©curit√© et ressources, √©quilibrant souverainet√© et partenariats pour pr√©server sa stabilit√© strat√©gique.</p>
                    </div>
                </div>

                <div class="continent-card" onclick="toggleContinentSection('antarctica')" title="Cliquez pour d√©velopper">
                    <h3 class="continent-title">üßä Situation en Antarctique</h3>
                    <div class="expand-indicator">‚ñº</div>
                    <div class="continent-text" id="antarctica-text" style="display: none;">
                        <p>En octobre 2025, l'Antarctique reste un bastion de coop√©ration scientifique sous le Trait√© antarctique, mais fait face √† des pressions g√©opolitiques croissantes avec l'essor de la pr√©sence chinoise et russe, qui testent les limites de la d√©militarisation et de l'interdiction mini√®re via des recherches sur les ressources fossiles et min√©rales. Des niveaux historiquement bas de glace de mer pour la quatri√®me ann√©e cons√©cutive, dus au r√©chauffement climatique, acc√©l√®rent la fonte des glaciers et menacent la mont√©e des eaux globales, tandis qu'un √©v√©nement de r√©chauffement stratosph√©rique soudain en septembre a fait grimper les temp√©ratures de plus de 30 ¬∞C.</p>
                        <p>Des exp√©ditions comme celle de l'Australian RSV Nuyina et des √©tudes sur les carottes de glace par la British Antarctic Survey soulignent l'urgence scientifique, mais des incidents comme l'√©valuation psychologique d'un chercheur sud-africain rappellent les fragilit√©s humaines. Bien que sans conflits arm√©s, la r√©gion risque une √©rosion du statu quo face √† des revendications territoriales latentes et √† l'int√©r√™t commercial croissant.</p>
                    </div>
                </div>
            </div>
            
            <div class="geopolitical-instructions">
                Cliquez sur √ó pour fermer ‚Ä¢ Analyse g√©opolitique - Octobre 2025
            </div>
        </div>
    </div>

    <div class="dashboard-container">
        <div class="section extinction-section">
            <h1 class="extinction-title">INDICE D'EXTINCTION DE L'HUMANIT√â</h1>
            <div class="gauge-container">
                <div class="gauge-background">
                    <div class="gauge-ticks" id="gaugeTicks"></div>
                    <div class="gauge-needle" id="gaugeNeedle"></div>
                </div>
            </div>
            <div class="world-commentary world-commentary-hover" onclick="showGeopoliticalAnalysis()" title="Cliquez pour voir l'analyse g√©opolitique d√©taill√©e par continent">
                <h3 class="commentary-title">√âtat global : Stabilit√© sous tension</h3>
                <div class="commentary-text">
                    <p>L'humanit√© √©volue dans une phase de stabilit√© fragile. La population mondiale d√©passe les huit milliards d'habitants, soutenue par une √©conomie encore fonctionnelle et des ressources √©nerg√©tiques disponibles, bien que sous pression.</p>
                    
                    <p>Les conflits internationaux restent limit√©s : seules quelques guerres inter-√©tatiques persistent, tandis que la majorit√© des tensions se concentrent √† l'int√©rieur des fronti√®res. Les grandes puissances maintiennent un fragile √©quilibre diplomatique, √©vitant pour l'instant une escalade mondiale.</p>
                    
                    <p>Les indicateurs environnementaux demeurent pr√©occupants, mais les efforts de transition √©nerg√©tique et les avanc√©es technologiques ralentissent partiellement la d√©gradation.</p>
                    
                    <p>La jauge reste donc dans le vert, signalant que malgr√© les fractures et les risques √©mergents, l'humanit√© conserve encore une marge de s√©curit√© avant le basculement.</p>
                </div>
            </div>
            
            <!-- Audio Controls -->
            <div class="audio-controls-ieh" id="audioControlsIEH" onclick="toggleAudioPanel()">
                <button id="audioToggle" onclick="toggleAudio(event)">
                    <span class="audio-icon">üîá</span>
                    <span class="audio-text">AUDIO OFF</span>
                </button>
            </div>
        </div>

        <div class="section global-section">
            <h2 class="section-title">üåç Statut Global</h2>
            <div class="global-stats">
                <div class="stat-item population-item" title="Population mondiale (Banque Mondiale)">
                    <div class="stat-value" id="populationValue">8.1B</div>
                    <div class="stat-label">Population üåç</div>
                    <div class="population-popup" id="populationPopup">
                        <div class="popup-title">üåç Population Mondiale</div>
                        <div class="popup-data">
                            <div class="popup-row">
                                <span class="popup-label">Population exacte:</span>
                                <span class="popup-value" id="exactPopulation">Chargement...</span>
                            </div>
                            <div class="popup-row">
                                <span class="popup-label">Ann√©e de r√©f√©rence:</span>
                                <span class="popup-value" id="populationYear">-</span>
                            </div>
                            <div class="popup-row">
                                <span class="popup-label">Source:</span>
                                <span class="popup-value">Banque Mondiale</span>
                            </div>
                            <div class="popup-row">
                                <span class="popup-label">Statut:</span>
                                <span class="popup-value">
                                    <span class="status-indicator status-cached" id="statusIndicator"></span>
                                    <span id="statusText">Donn√©es par d√©faut</span>
                                </span>
                            </div>
                        </div>
                        <div class="popup-link">
                            <a href="https://data.worldbank.org/indicator/SP.POP.TOTL" target="_blank" rel="noopener">
                                üîó Voir sur worldbank.org
                            </a>
                        </div>
                    </div>
                </div>
                <div class="stat-item" title="Conflits arm√©s internationaux actifs">
                    <div class="stat-value">12</div>
                    <div class="stat-label">Guerres Actives</div>
                </div>
                <div class="stat-item" title="Ressources en situation critique">
                    <div class="stat-value">847</div>
                    <div class="stat-label">Ressources Critiques</div>
                </div>
                <div class="stat-item" title="Pourcentage de r√©gions stables">
                    <div class="stat-value">73%</div>
                    <div class="stat-label">Stabilit√© R√©gionale</div>
                </div>
            </div>
        </div>

        <div class="section resources-section">
            <h2 class="section-title">‚ö° Ressources & √ânergie</h2>
            <div class="resource-bar oil-resource-hover" onclick="showOilMap()" title="Cliquez pour voir la carte des r√©serves mondiales">
                <div class="resource-label">
                    <span>üõ¢Ô∏è P√©trole</span>
                    <span>45%</span>
                </div>
                <div class="resource-progress">
                    <div class="resource-fill oil-fill"></div>
                </div>
            </div>
            <div class="resource-bar gas-resource-hover" onclick="showGasMap()" title="Cliquez pour voir la carte des r√©serves mondiales de gaz naturel">
                <div class="resource-label">
                    <span>üî• Gaz Naturel</span>
                    <span>62%</span>
                </div>
                <div class="resource-progress">
                    <div class="resource-fill gas-fill"></div>
                </div>
            </div>
            <div class="resource-bar">
                <div class="resource-label">
                    <span>üíß Eau Douce</span>
                    <span>78%</span>
                </div>
                <div class="resource-progress">
                    <div class="resource-fill water-fill"></div>
                </div>
            </div>
        </div>

        <div class="section climate-section climate-section-hover" onclick="showClimateData()" title="Cliquez pour voir les donn√©es climatiques en temps r√©el">
            <h2 class="section-title">üå°Ô∏è Climat & Biodiversit√©</h2>
            <div class="climate-indicator">
                <div class="stat-label">Anomalie Temp√©rature</div>
                <div class="temp-display">+1.8¬∞C</div>
            </div>
        </div>

        <div class="section conflicts-section conflicts-section-hover" onclick="showConflictsChart()" title="Cliquez pour voir l'√©volution des conflits arm√©s" onmouseenter="playWarSound()" onmouseleave="stopWarSound()">
            <div class="conflict-subsection">
                <h3 class="section-title">‚öîÔ∏è Conflits</h3>
                <div class="conflict-counter">12</div>
                <div class="stat-label">Guerres Actives</div>
                <div class="conflict-counter">47</div>
                <div class="stat-label">Tensions Internes</div>
            </div>
        </div>

        <div class="section tech-risks-section">
            <div class="conflict-subsection">
                <h3 class="section-title">‚ò¢Ô∏è Risques Tech</h3>
            </div>
        </div>

        <div class="section health-section">
            <h2 class="section-title">üß¨ Sant√© & Stabilit√©</h2>
            <div class="stat-item">
                <div class="stat-value">2</div>
                <div class="stat-label">Pand√©mies Actives</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">84%</div>
                <div class="stat-label">R√©silience Infrastructure</div>
            </div>
        </div>
    </div>

    <script>
        let audioEnabled = false;
        const audio = document.getElementById('backgroundAudio');
        const audioToggle = document.getElementById('audioToggle');

        // Initialize audio
        audio.volume = 0.3; // Volume √† 30% pour ne pas √™tre trop fort

        // Effets sonores pour les modales
        const expansionOpenSound = new Audio('sounds/expansion1.wav');
        const expansionCloseSound = new Audio('sounds/expansion2.wav');
        const warSound = new Audio('sounds/war.wav');
        
        // Configuration des effets sonores
        expansionOpenSound.volume = 0.4;
        expansionCloseSound.volume = 0.4;
        warSound.volume = 0.3;

        function toggleAudioPanel() {
            const audioControls = document.getElementById('audioControlsIEH');
            if (audioControls) {
                audioControls.classList.toggle('expanded');
            }
        }

        function toggleAudio(event) {
            event.stopPropagation(); // Emp√™che la propagation vers toggleAudioPanel
            
            const audioToggle = document.getElementById('audioToggle');
            const audioIcon = audioToggle.querySelector('.audio-icon');
            const audioText = audioToggle.querySelector('.audio-text');
            
            if (audioEnabled) {
                audio.pause();
                audioIcon.textContent = 'üîá';
                audioText.textContent = 'AUDIO OFF';
                audioToggle.style.background = 'rgba(255, 100, 100, 0.2)';
                audioToggle.style.borderColor = 'rgba(255, 100, 100, 0.5)';
                audioToggle.style.color = '#ff6464';
                audioEnabled = false;
            } else {
                audio.play().catch(e => {
                    console.log('Erreur lecture audio:', e);
                    alert('Impossible de lire l\'audio. Votre navigateur bloque peut-√™tre la lecture automatique.');
                });
                audioIcon.textContent = 'üîä';
                audioText.textContent = 'AUDIO ON';
                audioToggle.style.background = 'rgba(0, 255, 255, 0.2)';
                audioToggle.style.borderColor = 'rgba(0, 255, 255, 0.5)';
                audioToggle.style.color = '#00ffff';
                audioEnabled = true;
            }
        }

        // Auto-start audio apr√®s interaction utilisateur (requis par les navigateurs modernes)
        document.addEventListener('click', function startAudio() {
            if (!audioEnabled) {
                toggleAudio();
            }
            document.removeEventListener('click', startAudio);
        }, { once: true });

        // Fonction pour jouer le son de guerre au survol de la section conflits
        function playWarSound() {
            warSound.currentTime = 0;
            warSound.play().catch(e => console.log('Erreur son guerre:', e));
        }

        // Fonction pour arr√™ter le son de guerre
        function stopWarSound() {
            warSound.pause();
            warSound.currentTime = 0;
        }

        // Gestion des erreurs audio
        audio.addEventListener('error', function(e) {
            console.log('Erreur audio:', e);
            audioToggle.innerHTML = '‚ùå AUDIO ERROR';
            audioToggle.disabled = true;
        });

        // News ticker functionality with France24 RSS feed
        const fallbackNews = [
            "Tensions nucl√©aires en hausse : 3 pays placent leurs forces en alerte maximale",
            "R√©chauffement climatique : nouveau record de +2.1¬∞C atteint ce mois",
            "Crise √©nerg√©tique mondiale : les r√©serves de p√©trole chutent √† 42%",
            "Pand√©mie H7N3 : 12 nouveaux foyers d√©tect√©s en Asie du Sud-Est",
            "IA militaire : premi√®re utilisation autonome signal√©e dans un conflit",
            "Effondrement de la biodiversit√© : 15 esp√®ces d√©clar√©es √©teintes cette semaine"
        ];

        let currentNewsItems = [...fallbackNews];

        async function fetchFrance24News() {
            try {
                console.log('üîÑ R√©cup√©ration des nouvelles France24...');
                const response = await fetch('https://api.rss2json.com/v1/api.json?rss_url=https://www.france24.com/fr/rss');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('üì∞ Donn√©es re√ßues:', data);
                
                if (data.status === 'ok' && data.items && data.items.length > 0) {
                    // Extraire les titres et nettoyer le HTML
                    currentNewsItems = data.items.slice(0, 10).map(item => {
                        // Nettoyer le titre des balises HTML
                        const cleanTitle = item.title.replace(/<[^>]*>/g, '').trim();
                        return cleanTitle;
                    });
                    
                    console.log('‚úÖ Nouvelles France24 charg√©es:', currentNewsItems.length);
                    updateNewsTicker();
                    
                    // Mettre √† jour l'indicateur de statut
                    updateNewsStatus('LIVE FRANCE24', '#00ff00');
                } else {
                    throw new Error('Format de donn√©es invalide');
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è Erreur lors du chargement des nouvelles France24:', error);
                console.log('üîÑ Utilisation des nouvelles de secours...');
                currentNewsItems = [...fallbackNews];
                updateNewsTicker();
                updateNewsStatus('NOUVELLES LOCALES', '#ffaa00');
            }
        }

        function updateNewsTicker() {
            const newsContent = document.getElementById('newsContent');
            const shuffledNews = [...currentNewsItems].sort(() => Math.random() - 0.5);
            
            newsContent.innerHTML = shuffledNews.map(item => 
                `<span class="news-item">${item}</span>`
            ).join('');
        }

        function updateNewsStatus(status, color) {
            const liveStatus = document.getElementById('liveStatus');
            if (liveStatus) {
                const indicator = liveStatus.querySelector('.status-indicator');
                const text = liveStatus.querySelector('span:last-child');
                
                if (indicator && text) {
                    indicator.className = `status-indicator ${color === '#00ff00' ? 'status-live' : 'status-cached'}`;
                    text.textContent = status;
                }
            }
        }

        // Syst√®me de calcul IEH (Indice d'Extinction de l'Humanit√©)
        const iehConfig = {
            guerresEntrePays: { value: 3, max: 10, weight: 10 },
            conflitsInternes: { value: 12, max: 50, weight: 8 },
            petroleDisponible: { value: 45, max: 100, weight: 6, inverse: true }, // 45% = p√©nurie
            gazDisponible: { value: 62, max: 100, weight: 5, inverse: true },
            eauDisponible: { value: 78, max: 100, weight: 12, inverse: true },
            temperatureAnomalie: { value: 1.8, max: 5, weight: 18 },
            biodiversitePerdue: { value: 60, max: 100, weight: 12 },
            tensionNucleaire: { value: 6, max: 10, weight: 15 },
            pandemiesActives: { value: 2, max: 10, weight: 6 },
            risqueIA: { value: 4, max: 10, weight: 8 }
        };

        function calculateIEH() {
            let totalContribution = 0;
            let totalWeight = 0;
            
            console.log('üßÆ Calcul IEH en cours...');
            
            for (const [key, config] of Object.entries(iehConfig)) {
                let normalizedValue;
                
                if (config.inverse) {
                    // Pour les ressources : plus c'est bas, plus c'est dangereux
                    normalizedValue = 1 - (config.value / 100);
                } else {
                    // Pour les menaces : plus c'est haut, plus c'est dangereux
                    normalizedValue = config.value / config.max;
                }
                
                const contribution = config.weight * normalizedValue;
                totalContribution += contribution;
                totalWeight += config.weight;
                
                console.log(`üìä ${key}: ${config.value} ‚Üí normalized: ${normalizedValue.toFixed(3)} ‚Üí contrib: ${contribution.toFixed(2)}`);
            }
            
            // Score normalis√© sur la somme des poids max (100)
            const normalizedScore = totalContribution / 100;
            
            // Conversion en IEH (1 √† 99)
            const ieh = Math.max(1, Math.min(99, 1 + Math.round(normalizedScore * 98)));
            
            console.log(`üéØ Score total: ${totalContribution.toFixed(2)}/100`);
            console.log(`üìà Score normalis√©: ${normalizedScore.toFixed(4)}`);
            console.log(`‚ö†Ô∏è IEH calcul√©: ${ieh}/99`);
            
            return {
                ieh: ieh,
                score: normalizedScore,
                totalContribution: totalContribution,
                details: Object.entries(iehConfig).map(([key, config]) => ({
                    name: key,
                    value: config.value,
                    contribution: config.weight * (config.inverse ? 1 - (config.value / 100) : config.value / config.max)
                }))
            };
        }

        function updateIEHDisplay() {
            const result = calculateIEH();
            const gaugeValue = document.getElementById('gaugeValue');
            const gaugeNeedle = document.getElementById('gaugeNeedle');
            
            // Mettre √† jour l'affichage
            gaugeValue.textContent = `${result.ieh} / 99`;
            
            // Positionner l'aiguille (position en pourcentage)
            const needlePosition = (result.ieh / 99) * 100;
            gaugeNeedle.style.left = `${needlePosition}%`;
            
            // Changer la couleur selon le niveau de danger
            let color, textShadow;
            if (result.ieh <= 20) {
                color = '#00ff00'; // Vert - situation stable
                textShadow = '0 0 20px rgba(0, 255, 0, 0.5)';
            } else if (result.ieh <= 40) {
                color = '#7fff00'; // Vert-jaune - pr√©occupant
                textShadow = '0 0 20px rgba(127, 255, 0, 0.5)';
            } else if (result.ieh <= 60) {
                color = '#ffff00'; // Jaune - dangereux
                textShadow = '0 0 20px rgba(255, 255, 0, 0.5)';
            } else if (result.ieh <= 80) {
                color = '#ff8c00'; // Orange - tr√®s dangereux
                textShadow = '0 0 20px rgba(255, 140, 0, 0.5)';
            } else {
                color = '#ff0000'; // Rouge - critique
                textShadow = '0 0 20px rgba(255, 0, 0, 0.8)';
            }
            
            gaugeValue.style.color = color;
            gaugeValue.style.textShadow = textShadow;
            
            return result;
        }

        function updateMetrics() {
            // Simuler de l√©g√®res variations dans les m√©triques
            const variations = {
                guerresEntrePays: () => Math.max(0, Math.min(10, iehConfig.guerresEntrePays.value + (Math.random() - 0.5) * 0.2)),
                conflitsInternes: () => Math.max(0, Math.min(50, iehConfig.conflitsInternes.value + (Math.random() - 0.5) * 2)),
                temperatureAnomalie: () => Math.max(0, Math.min(5, iehConfig.temperatureAnomalie.value + (Math.random() - 0.5) * 0.1)),
                tensionNucleaire: () => Math.max(0, Math.min(10, iehConfig.tensionNucleaire.value + (Math.random() - 0.5) * 0.5)),
                pandemiesActives: () => Math.max(0, Math.min(10, iehConfig.pandemiesActives.value + (Math.random() - 0.5) * 0.3)),
                risqueIA: () => Math.max(0, Math.min(10, iehConfig.risqueIA.value + (Math.random() - 0.5) * 0.3))
            };
            
            // Appliquer les variations
            for (const [key, fn] of Object.entries(variations)) {
                if (iehConfig[key]) {
                    iehConfig[key].value = parseFloat(fn().toFixed(1));
                }
            }
            
            // Mettre √† jour l'affichage des m√©triques dans l'interface
            const guerresElement = document.querySelector('.global-stats .stat-item:nth-child(2) .stat-value');
            if (guerresElement) guerresElement.textContent = Math.round(iehConfig.guerresEntrePays.value + iehConfig.conflitsInternes.value);
            
            const tempElement = document.querySelector('.temp-display');
            if (tempElement) tempElement.textContent = `+${iehConfig.temperatureAnomalie.value.toFixed(1)}¬∞C`;
            
            // Calculer et afficher le nouvel IEH
            updateIEHDisplay();
        }

        // R√©cup√©ration de la population mondiale via World Bank API
        async function fetchWorldPopulation() {
            try {
                console.log('üåç R√©cup√©ration de la population mondiale...');
                const response = await fetch('https://api.worldbank.org/v2/world/indicator/SP.POP.TOTL?format=json&date=2023:2024&per_page=5');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('üìä Donn√©es population re√ßues:', data);
                
                if (data && data.length > 1 && data[1] && data[1].length > 0) {
                    // Prendre la donn√©e la plus r√©cente disponible
                    const latestData = data[1][0];
                    const population = latestData.value;
                    const year = latestData.date;
                    
                    if (population) {
                        // Formater la population en milliards avec 1 d√©cimale
                        const populationInBillions = (population / 1000000000).toFixed(1);
                        
                        // Mettre √† jour l'affichage avec animation
                        const populationElement = document.querySelector('.global-stats .stat-item:first-child .stat-value');
                        const populationContainer = document.querySelector('.global-stats .stat-item:first-child');
                        
                        if (populationElement && populationContainer) {
                            // Animation de mise √† jour
                            populationContainer.classList.add('updating');
                            
                            setTimeout(() => {
                                populationElement.textContent = `${populationInBillions}B`;
                                populationContainer.title = `Population mondiale ${year}: ${population.toLocaleString()} habitants (Banque Mondiale)`;
                                populationContainer.classList.remove('updating');
                                
                                // Mettre √† jour la pop-up
                                updatePopulationPopup(population, year, true);
                            }, 500);
                        }
                        
                        console.log(`‚úÖ Population mondiale mise √† jour: ${populationInBillions}B (${year})`);
                        console.log(`üìà Population exacte: ${population.toLocaleString()}`);
                        
                        return {
                            population: population,
                            year: year,
                            formatted: `${populationInBillions}B`
                        };
                    }
                }
                throw new Error('Donn√©es de population non trouv√©es');
                
            } catch (error) {
                console.warn('‚ö†Ô∏è Erreur lors du chargement de la population mondiale:', error);
                console.log('üîÑ Conservation de la valeur par d√©faut...');
                
                // Garder la valeur par d√©faut en cas d'erreur
                const populationElement = document.querySelector('.global-stats .stat-item:first-child .stat-value');
                if (populationElement) {
                    populationElement.title = 'Population mondiale (estimation par d√©faut)';
                    // Mettre √† jour la pop-up avec les donn√©es par d√©faut
                    updatePopulationPopup(8100000000, '2024', false);
                }
                
                return null;
            }
        }

        // Fonction pour mettre √† jour la pop-up de population
        function updatePopulationPopup(population, year, isLive) {
            const exactPopulationElement = document.getElementById('exactPopulation');
            const populationYearElement = document.getElementById('populationYear');
            const statusIndicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            
            if (exactPopulationElement) {
                exactPopulationElement.textContent = population.toLocaleString('fr-FR');
            }
            
            if (populationYearElement) {
                populationYearElement.textContent = year;
            }
            
            if (statusIndicator && statusText) {
                if (isLive) {
                    statusIndicator.className = 'status-indicator status-live';
                    statusText.textContent = 'Donn√©es en temps r√©el';
                } else {
                    statusIndicator.className = 'status-indicator status-cached';
                    statusText.textContent = 'Donn√©es par d√©faut';
                }
            }
        }

        // Fonction pour mettre √† jour toutes les donn√©es externes
        async function updateExternalData() {
            console.log('üîÑ Mise √† jour des donn√©es externes...');
            
            // Lancer les deux requ√™tes en parall√®le
            const [newsResult, populationResult] = await Promise.allSettled([
                fetchFrance24News(),
                fetchWorldPopulation()
            ]);
            
            // Logger les r√©sultats
            if (newsResult.status === 'fulfilled') {
                console.log('‚úÖ Nouvelles mises √† jour');
            } else {
                console.log('‚ö†Ô∏è Erreur nouvelles:', newsResult.reason);
            }
            
            if (populationResult.status === 'fulfilled' && populationResult.value) {
                console.log('‚úÖ Population mise √† jour');
            } else {
                console.log('‚ö†Ô∏è Erreur population:', populationResult.reason);
            }
        }

        // Charger les donn√©es au d√©marrage
        updateExternalData();
        
        // Actualiser les donn√©es externes toutes les 10 minutes
        setInterval(updateExternalData, 600000);
        
        // M√©langer l'ordre d'affichage des nouvelles toutes les 2 minutes
        setInterval(updateNewsTicker, 120000);
        
        // G√©n√©ration des graduations de la jauge
        function generateTicks() {
            const ticksContainer = document.getElementById('gaugeTicks');
            if (!ticksContainer) return;
            
            for (let i = 1; i <= 99; i++) {
                const tick = document.createElement('div');
                tick.className = 'tick';
                tick.style.left = `${(i / 99) * 100}%`;
                if (i % 10 === 0) {
                    tick.style.height = '25px';
                    tick.style.width = '3px';
                    tick.style.background = '#ffffff';
                    
                    // Ajouter les num√©ros pour les graduations principales
                    const label = document.createElement('div');
                    label.style.cssText = `
                        position: absolute;
                        top: 30px;
                        left: 50%;
                        transform: translateX(-50%);
                        color: rgba(255, 255, 255, 0.8);
                        font-size: 0.7rem;
                        font-weight: 700;
                    `;
                    label.textContent = i;
                    tick.appendChild(label);
                }
                ticksContainer.appendChild(tick);
            }
        }

        // Gestion du positionnement dynamique de la pop-up (version stable)
        function positionPopup() {
            const populationItem = document.querySelector('.population-item');
            const popup = document.getElementById('populationPopup');
            
            if (!populationItem || !popup) return;
            
            // √âviter les recalculs en boucle qui causent les scrollbars
            if (popup.dataset.positioning === 'true') return;
            popup.dataset.positioning = 'true';
            
            const rect = populationItem.getBoundingClientRect();
            
            // Utiliser des dimensions fixes pour √©viter les recalculs
            const popupWidth = 280; // Largeur fixe de la pop-up
            const popupHeight = 200; // Hauteur approximative
            
            // Position de base : au-dessus de l'√©l√©ment, centr√©
            let top = rect.top - popupHeight - 20;
            let left = rect.left + (rect.width / 2) - (popupWidth / 2);
            
            // Ajustements si la pop-up sort de l'√©cran
            if (top < 10) {
                // Si pas assez de place en haut, afficher en bas
                top = rect.bottom + 10;
                popup.classList.add('bottom');
            } else {
                popup.classList.remove('bottom');
            }
            
            if (left < 10) {
                // Si trop √† gauche
                left = 10;
            } else if (left + popupWidth > window.innerWidth - 10) {
                // Si trop √† droite
                left = window.innerWidth - popupWidth - 10;
            }
            
            popup.style.top = `${top}px`;
            popup.style.left = `${left}px`;
            
            // R√©initialiser le flag apr√®s un court d√©lai
            setTimeout(() => {
                popup.dataset.positioning = 'false';
            }, 100);
        }

        // Event listeners pour le positionnement de la pop-up
        document.addEventListener('DOMContentLoaded', function() {
            generateTicks();
            updateIEHDisplay();
            // Initialiser la pop-up avec les donn√©es par d√©faut
            updatePopulationPopup(8100000000, '2024', false);
            
            // Ajouter les event listeners pour la pop-up
            const populationItem = document.querySelector('.population-item');
            if (populationItem) {
                let repositionTimer;
                populationItem.addEventListener('mouseenter', function() {
                    // √âviter les repositionnements multiples
                    clearTimeout(repositionTimer);
                    repositionTimer = setTimeout(positionPopup, 50);
                });
                
                populationItem.addEventListener('mouseleave', function() {
                    clearTimeout(repositionTimer);
                });
            }
            
            // Repositionner sur redimensionnement de fen√™tre (avec throttling)
            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(positionPopup, 200);
            });
        });

        // Gestion de la modale des r√©serves de p√©trole
        function showOilMap() {
            const modal = document.getElementById('oilMapModal');
            if (modal) {
                // Jouer le son d'ouverture
                expansionOpenSound.currentTime = 0;
                expansionOpenSound.play().catch(e => console.log('Erreur son ouverture:', e));
                
                // Fixer la position de scroll avant d'ouvrir la modale
                const scrollY = window.scrollY;
                document.body.style.position = 'fixed';
                document.body.style.top = `-${scrollY}px`;
                document.body.style.width = '100%';
                document.body.style.overflow = 'hidden';
                
                modal.classList.add('show');
                console.log('üõ¢Ô∏è Ouverture de la carte des r√©serves de p√©trole');
            }
        }

        function closeOilMap() {
            const modal = document.getElementById('oilMapModal');
            if (modal) {
                // Jouer le son de fermeture
                expansionCloseSound.currentTime = 0;
                expansionCloseSound.play().catch(e => console.log('Erreur son fermeture:', e));
                
                modal.classList.remove('show');
                
                // Restaurer la position de scroll
                const scrollY = document.body.style.top;
                document.body.style.position = '';
                document.body.style.top = '';
                document.body.style.width = '';
                document.body.style.overflow = '';
                
                if (scrollY) {
                    window.scrollTo(0, parseInt(scrollY || '0') * -1);
                }
                
                console.log('üõ¢Ô∏è Fermeture de la carte des r√©serves de p√©trole');
            }
        }



        // Gestion de la modale des conflits arm√©s
        function showConflictsChart() {
            const modal = document.getElementById('conflictsChartModal');
            if (modal) {
                // Jouer le son d'ouverture
                expansionOpenSound.currentTime = 0;
                expansionOpenSound.play().catch(e => console.log('Erreur son ouverture:', e));
                
                // Fixer la position de scroll avant d'ouvrir la modale
                const scrollY = window.scrollY;
                document.body.style.position = 'fixed';
                document.body.style.top = `-${scrollY}px`;
                document.body.style.width = '100%';
                document.body.style.overflow = 'hidden';
                
                modal.classList.add('show');
                console.log('‚öîÔ∏è Ouverture du graphique des conflits arm√©s');
            }
        }

        function closeConflictsChart() {
            const modal = document.getElementById('conflictsChartModal');
            if (modal) {
                // Jouer le son de fermeture
                expansionCloseSound.currentTime = 0;
                expansionCloseSound.play().catch(e => console.log('Erreur son fermeture:', e));
                
                modal.classList.remove('show');
                
                // Restaurer la position de scroll
                const scrollY = document.body.style.top;
                document.body.style.position = '';
                document.body.style.top = '';
                document.body.style.width = '';
                document.body.style.overflow = '';
                
                if (scrollY) {
                    window.scrollTo(0, parseInt(scrollY || '0') * -1);
                }
                
                console.log('‚öîÔ∏è Fermeture du graphique des conflits arm√©s');
            }
        }

        // Gestion de la modale des r√©serves de gaz naturel
        function showGasMap() {
            const modal = document.getElementById('gasMapModal');
            if (modal) {
                // Jouer le son d'ouverture
                expansionOpenSound.currentTime = 0;
                expansionOpenSound.play().catch(e => console.log('Erreur son ouverture:', e));
                
                // Fixer la position de scroll avant d'ouvrir la modale
                const scrollY = window.scrollY;
                document.body.style.position = 'fixed';
                document.body.style.top = `-${scrollY}px`;
                document.body.style.width = '100%';
                document.body.style.overflow = 'hidden';
                
                modal.classList.add('show');
                console.log('üî• Ouverture de la carte des r√©serves de gaz naturel');
            }
        }

        function closeGasMap() {
            const modal = document.getElementById('gasMapModal');
            if (modal) {
                // Jouer le son de fermeture
                expansionCloseSound.currentTime = 0;
                expansionCloseSound.play().catch(e => console.log('Erreur son fermeture:', e));
                
                modal.classList.remove('show');
                
                // Restaurer la position de scroll
                const scrollY = document.body.style.top;
                document.body.style.position = '';
                document.body.style.top = '';
                document.body.style.width = '';
                document.body.style.overflow = '';
                
                if (scrollY) {
                    window.scrollTo(0, parseInt(scrollY || '0') * -1);
                }
                
                console.log('üî• Fermeture de la carte des r√©serves de gaz naturel');
            }
        }

        // Gestion de la modale des donn√©es climatiques
        function showClimateData() {
            const modal = document.getElementById('climateDataModal');
            if (modal) {
                // Jouer le son d'ouverture
                expansionOpenSound.currentTime = 0;
                expansionOpenSound.play().catch(e => console.log('Erreur son ouverture:', e));
                
                // Fixer la position de scroll avant d'ouvrir la modale
                const scrollY = window.scrollY;
                document.body.style.position = 'fixed';
                document.body.style.top = `-${scrollY}px`;
                document.body.style.width = '100%';
                document.body.style.overflow = 'hidden';
                
                modal.classList.add('show');
                console.log('üå°Ô∏è Ouverture des donn√©es climatiques mondiales');
            }
        }

        function closeClimateData() {
            const modal = document.getElementById('climateDataModal');
            if (modal) {
                // Jouer le son de fermeture
                expansionCloseSound.currentTime = 0;
                expansionCloseSound.play().catch(e => console.log('Erreur son fermeture:', e));
                
                modal.classList.remove('show');
                
                // Restaurer la position de scroll
                const scrollY = document.body.style.top;
                document.body.style.position = '';
                document.body.style.top = '';
                document.body.style.width = '';
                document.body.style.overflow = '';
                
                if (scrollY) {
                    window.scrollTo(0, parseInt(scrollY || '0') * -1);
                }
                
                console.log('üå°Ô∏è Fermeture des donn√©es climatiques mondiales');
            }
        }

        // Gestion de la modale d'analyse g√©opolitique
        function showGeopoliticalAnalysis() {
            const modal = document.getElementById('geopoliticalModal');
            if (modal) {
                // Jouer le son d'ouverture
                expansionOpenSound.currentTime = 0;
                expansionOpenSound.play().catch(e => console.log('Erreur son ouverture:', e));
                
                // Fixer la position de scroll avant d'ouvrir la modale
                const scrollY = window.scrollY;
                document.body.style.position = 'fixed';
                document.body.style.top = `-${scrollY}px`;
                document.body.style.width = '100%';
                document.body.style.overflow = 'hidden';
                
                modal.classList.add('show');
                console.log('üåç Ouverture de l\'analyse g√©opolitique mondiale');
            }
        }

        function closeGeopoliticalAnalysis() {
            const modal = document.getElementById('geopoliticalModal');
            if (modal) {
                // Jouer le son de fermeture
                expansionCloseSound.currentTime = 0;
                expansionCloseSound.play().catch(e => console.log('Erreur son fermeture:', e));
                
                modal.classList.remove('show');
                
                // Restaurer la position de scroll
                const scrollY = document.body.style.top;
                document.body.style.position = '';
                document.body.style.top = '';
                document.body.style.width = '';
                document.body.style.overflow = '';
                
                if (scrollY) {
                    window.scrollTo(0, parseInt(scrollY || '0') * -1);
                }
                
                console.log('üåç Fermeture de l\'analyse g√©opolitique mondiale');
            }
        }

        // Fonction pour g√©rer l'accord√©on des continents
        function toggleContinentSection(continentId) {
            const textElement = document.getElementById(continentId + '-text');
            const cardElement = textElement.parentElement;
            
            if (textElement.style.display === 'none' || textElement.style.display === '') {
                // Ouvrir la section
                textElement.style.display = 'block';
                cardElement.classList.add('expanded');
                console.log(`üìñ Ouverture de la section ${continentId}`);
            } else {
                // Fermer la section
                textElement.style.display = 'none';
                cardElement.classList.remove('expanded');
                console.log(`üìï Fermeture de la section ${continentId}`);
            }
        }

        // Fermer les modales en cliquant sur le fond
        document.addEventListener('click', function(event) {
            const oilModal = document.getElementById('oilMapModal');
            const conflictsModal = document.getElementById('conflictsChartModal');
            const gasModal = document.getElementById('gasMapModal');
            const climateModal = document.getElementById('climateDataModal');
            const geopoliticalModal = document.getElementById('geopoliticalModal');
            
            if (event.target === oilModal) {
                closeOilMap();
            } else if (event.target === conflictsModal) {
                closeConflictsChart();
            } else if (event.target === gasModal) {
                closeGasMap();
            } else if (event.target === climateModal) {
                closeClimateData();
            } else if (event.target === geopoliticalModal) {
                closeGeopoliticalAnalysis();
            }
        });

        // Fermer les modales avec la touche Escape
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeOilMap();
                closeConflictsChart();
                closeGasMap();
                closeClimateData();
                closeGeopoliticalAnalysis();
            }
        });

        // Calculer l'IEH initial et le mettre √† jour r√©guli√®rement
        updateIEHDisplay();
        setInterval(updateMetrics, 30000); // Mise √† jour toutes les 30 secondes
    </script>
</body>
</html>